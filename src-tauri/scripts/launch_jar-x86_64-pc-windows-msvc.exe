@echo off
setlocal

REM Check if the JAR path argument is provided
if "%~1"=="" (
  echo Usage: %0 ^<path_to_jar^>
  exit /b 1
)

set "jar_path=%~1"

REM Function to find Java executable in JAVA_HOME
:find_java_in_java_home
if defined JAVA_HOME (
  if exist "%JAVA_HOME%\bin\java.exe" (
    set "JAVA_CMD=%JAVA_HOME%\bin\java.exe"
  )
)

REM Function to find Java executable in system's PATH
:find_java_in_path
for %%I in (java.exe) do set "JAVA_CMD=%%~$PATH:I"

REM Check if Java is found and execute the JAR file
if defined JAVA_CMD (
  echo Executing JAR file using: %JAVA_CMD%
  "%JAVA_CMD%" -jar "%jar_path%"
) else (
  echo Java not found. Please set JAVA_HOME or ensure Java is in the system's PATH.
  exit /b 1
)

endlocal
