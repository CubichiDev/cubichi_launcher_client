#!/bin/bash

# Check if the JAR path argument is provided
if [ $# -lt 1 ]; then
  echo "Usage: $0 <path_to_jar>"
  exit 1
fi

jar_path="$1"

# Function to find Java executable in JAVA_HOME
find_java_in_java_home() {
  if [ -n "$JAVA_HOME" ] && [ -x "$JAVA_HOME/bin/java" ]; then
    JAVA_CMD="$JAVA_HOME/bin/java"
  fi
}

# Function to find Java executable in system's PATH
find_java_in_path() {
  if command -v java >/dev/null 2>&1; then
    JAVA_CMD="java"
  fi
}

# Try finding Java in JAVA_HOME, then in PATH
find_java_in_java_home
if [ -z "$JAVA_CMD" ]; then
  find_java_in_path
fi

# Check if Java is found and execute the JAR file
if [ -n "$JAVA_CMD" ]; then
  echo "Executing JAR file using: $JAVA_CMD"
  "$JAVA_CMD" -jar "$jar_path"
else
  echo "Java not found. Please set JAVA_HOME or ensure Java is in the system's PATH."
  exit 1
fi

